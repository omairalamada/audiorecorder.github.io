(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"flex flex-center",attrs:{padding:""}},[i("q-card",{staticClass:"my-card",attrs:{flat:""}},[i("q-card-section",{staticClass:"text-left"},[i("div",{staticClass:"text-subtitle2 q-pb-sm"},[e._v("Microphone")]),i("div",{staticClass:"row q-gutter-sm"},[i("q-btn",{staticStyle:{width:"150px"},attrs:{"no-caps":"",outline:"",loading:e.showAudioLoader,color:"blue-9",icon:"mic",label:"Test Mic"},on:{click:function(t){return e.testMic()}},scopedSlots:e._u([{key:"loading",fn:function(){return[i("q-spinner-bars",{staticClass:"on-left"}),e._v("\n            Recording...\n          ")]},proxy:!0}])}),i("q-select",{attrs:{options:e.microphones,outlined:""},on:{input:function(t){return e.setConnectedDevices(t)}},model:{value:e.selectMicrophone,callback:function(t){e.selectMicrophone=t},expression:"selectMicrophone"}})],1)])],1)],1)},s=[];i("ddb0"),i("2b3d");class n{async recordAudio(){await navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{const t=new MediaRecorder(e);t.start(),this["record_loading"]=!0;const i=[];t.addEventListener("dataavailable",(e=>{i.push(e.data),console.log("recording: ",i)})),t.addEventListener("stop",(()=>{const e=new Blob(i),t=URL.createObjectURL(e),a=new Audio(t);a.play()})),setTimeout((()=>{t.stop(),this["record_loading"]=!1}),3e3)}))}}let o=new n;var c=o;class r{async devices(){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)throw Error("UserMediaDetector getDevices failed: enumerateDevices is not supported");await navigator.mediaDevices.getUserMedia({audio:!0});const e=await navigator.mediaDevices.enumerateDevices(),t=e.filter((e=>"audioinput"===e.kind));return t.map((e=>e.label))}async permitted(e){if(!e||!Object.values(r.Kinds).includes(e))throw Error(`UserMediaDetector permitted failed: kind ${e} is not supported`);const t=await this.devices(),i=!!t.find((t=>t.kind===e&&!!t.label));return i}async permittedAll(e=Object.values(r.Kinds)){const t=Array.isArray(e)?e:Array.of(e),i=await Promise.all(t.map((e=>this.permitted(e))));return i.every((e=>e))}async setConnectedDevices(e){const t=await navigator.mediaDevices.enumerateDevices(),i=t.filter((e=>"audioinput"===e.kind));let a=i.find((t=>t.label==e));console.log("selected: ",a);const s={audio:{deviceId:a.deviceId?{exact:a.deviceId}:void 0}};return await navigator.mediaDevices.getUserMedia(s)}}r.Kinds={VideoInput:"videoinput",AudioInput:"audioinput",AudioOutput:"audioinput"};let d=new r;var l=d,u={name:"PageIndex",data(){return{showAudioLoader:!1,selectMicrophone:" ",microphones:[],audioStreamSelected:void 0,isDisabled:!1}},async created(){const e=await l.devices();this.microphones=e,this.selectMicrophone=e[0]},methods:{async testMic(){this["showAudioLoader"]=!0,await c.recordAudio(),setTimeout((()=>{this["showAudioLoader"]=!1}),3e3)},async setConnectedDevices(e){const t=await l.setConnectedDevices(e);this.audioStreamSelected=t}}},p=u,v=i("2877"),m=i("9989"),h=i("f09f"),w=i("a370"),f=i("9c40"),g=i("a154"),b=i("ddd8"),D=i("eebe"),y=i.n(D),M=Object(v["a"])(p,a,s,!1,null,null,null);t["default"]=M.exports;y()(M,"components",{QPage:m["a"],QCard:h["a"],QCardSection:w["a"],QBtn:f["a"],QSpinnerBars:g["a"],QSelect:b["a"]})}}]);